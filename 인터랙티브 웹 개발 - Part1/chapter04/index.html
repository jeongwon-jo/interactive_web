<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fast Bank</title>
  <link rel="stylesheet" href="./index.css">
</head>
<body>
  <header id="header">
    <div class="header__inner">
      <a href="#" class="logo"></a>
      <ul id="gnb">
        <li><a href="#">채용공고</a></li>
        <li><a href="#">이야기</a></li>
        <li><a href="#">자주묻는 질문</a></li>
        <li><a href="#">나의 지원현황</a></li>
      </ul>
    </div>
  </header>
  <section class="first_section">
    <div class="sec__inner">
      <div class="main-img__wrapper">
        <img width="480" src="./imgs/bank_img.png" alt="bank image">
      </div>
      <div class="intro-main">
        <p>이미 모두의 은행,<br> 패스트뱅크</p>
        <p>함께 일해요.</p>
        <p class="join-us-text">Join us!</p>
        <img class="down-arrow-icon" src="./imgs/icon_arrow_down.svg" alt="down arrow icon">
      </div>
    </div>
  </section>
  <section class="second_section">
    <ul class="list-item-wrapper">
      <li class="list-item">26주적금</li>
      <li class="list-item">저금통</li>
      <li class="list-item">비상금대출</li>
      <li class="list-item">입출금통장</li>
      <li class="list-item">세이프박스</li>
      <li class="list-item">자유적금</li>
      <li class="list-item">정기예금</li>
      <li class="list-item">내신용정보</li>
      <li class="list-item">실험실</li>
      <li class="list-item">마이너스통장대출</li>
      <li class="list-item">휴면예금/보험금찾기</li>
      <li class="list-item">개인사업자대출</li>
      <li class="list-item">해외송금받기</li>
      <li class="list-item">인증</li>
      <li class="list-item">간편이체</li>
      <li class="list-item">전월세보증금대출</li>
      <li class="list-item">프렌즈체크카드</li>
      <li class="list-item">모임통장</li>
      <li class="list-item">카카오뱅크mini</li>
      <li class="list-item">신용대출</li>
      <li class="list-item">증권사주식계좌</li>
      <li class="list-item">제휴신용카드</li>
      <li class="list-item">연계대출</li>
      <li class="list-item">26주적금</li>
      <li class="list-item">저금통</li>
      <li class="list-item">비상금대출</li>
      <li class="list-item">입출금통장</li>
      <li class="list-item">세이프박스</li>
      <li class="list-item">자유적금</li>
      <li class="list-item">정기예금</li>
      <li class="list-item">내신용정보</li>
      <li class="list-item">실험실</li>
      <li class="list-item">마이너스통장대출</li>
      <li class="list-item">휴면예금/보험금찾기</li>
      <li class="list-item">개인사업자대출</li>
      <li class="list-item">해외송금받기</li>
      <li class="list-item">인증</li>
      <li class="list-item">간편이체</li>
      <li class="list-item">전월세보증금대출</li>
      <li class="list-item">프렌즈체크카드</li>
      <li class="list-item">모임통장</li>
      <li class="list-item">카카오뱅크mini</li>
      <li class="list-item">신용대출</li>
      <li class="list-item">증권사주식계좌</li>
      <li class="list-item">제휴신용카드</li>
      <li class="list-item">연계대출</li>
    </ul>
    <main>
      <section class="panel1-img">
        <div id="flying_santa">
          <img src="imgs/santa_img.png" alt="">
        </div>
      </section>
    </main>
  </section>
  <script>
    // 리스트 시작지점 (스크롤해서 찾음)
    const listStyleChangeStartY = 400;
    // 리스트 끝지점 (스크롤해서 찾음)
    const listStyleChangeEndY = 2300;

    // 리스트 아이템 배열로 저장
    const listItems = document.querySelectorAll('.list-item')

    // division : 리스트의 높이 / 아이템의 개수
    const division = (listStyleChangeEndY - listStyleChangeStartY) / listItems.length;

    const panel1img = document.querySelector('.panel1-img')
    const flyingSantaImage = document.getElementById('flying_santa')

    window.addEventListener('scroll', ()=> {
      //스크롤 할때마다 list-item 의 on 클래스를 지움
      if (document.getElementsByClassName("on").length > 0) {
        Array.from(document.getElementsByClassName("on")).forEach(
          function (element) {
            element.classList.remove('on')
          }
        );
      }

      // 스크롤할때 단어 리스트 영역에 들어오면
      if (window.scrollY > listStyleChangeStartY && window.scrollY < listStyleChangeEndY) {
        // 액티브될 단어 index 구하기
        // 현재 스크롤된 아이템의 위치 / division px
        let targetIndex = Math.round((window.scrollY - listStyleChangeStartY) / division)
        // 해당 단어에 액티브 클래스 추가
        if (listItems[targetIndex]) listItems[targetIndex].classList.add('on')
      }

      // 산타 이미지 rotate
      // scrollYBottom = 스크롤하고있는 위치 아래부분
      const scrollYBottom = window.scrollY + document.documentElement.clientHeight

      if(scrollYBottom > panel1img.offsetTop && scrollYBottom < panel1img.offsetTop + panel1img.offsetHeight + 100) {
        const translateX = 80 - 80 * (scrollYBottom - panel1img.offsetTop) / (panel1img.offsetHeight + 100)
        const translateY = -13 + 13 * (scrollYBottom - panel1img.offsetTop) / (panel1img.offsetHeight + 100)
        const rotationDegree = 23 - 23 * 1.7 * (scrollYBottom - panel1img.offsetTop) / (panel1img.offsetHeight + 100)

        flyingSantaImage.style.transform = `translate(${translateX}px, ${translateY}px) rotate(${rotationDegree}deg)`
      }
    })
  </script>
</body>
</html>